# Notify2Discord

Notify2Discord は、Android の通知を Discord Webhook に転送しつつ、アプリ内履歴として管理できるアプリです。
現在は 5 タブ構成（履歴 / 転送アプリ / ルール / バッテリー / 設定）で、青系テーマを基調にしたモダンUIへ統一しています。

## 主な機能

### 通知転送
- 通知アクセス権限を使って端末通知を取得し、Discord Webhook へ送信
- アプリ別の個別Webhook設定（未設定時は共通Webhookを利用）
- 送信テンプレート対応: `{app}` `{title}` `{text}` `{time}` `{package}`
- Embed送信・添付抽出（画像/メッセージ添付/大アイコン）対応

### 空通知ガード（最新）
- タイトル・本文がどちらも空の通知は、基本的に送信/履歴保存しない
- ただし添付データがある通知は許可し、タイトルを「添付通知」として扱う
- 通知処理全体を例外耐性化し、端末差異で落ちにくい実装に調整

### 履歴管理
- 通知履歴をアプリ内に保存、アプリ単位・会話単位で参照
- LINEは会話スレッド単位で分離表示
- 既読管理、単体削除、複数選択削除、アプリ単位削除、全削除に対応
- 転送しない通知を「履歴対象」として保存する運用に対応

### 転送アプリ設定
- 転送対象 / 履歴対象を同一画面で管理
- システムアプリ表示フィルター（通常のみ / すべて / システム）
- 一覧スクロール時は「使い方など」カードを自動で隠して表示領域を拡大
- 検索 / 並び替え / 個別Webhook編集に対応

### ルール設定
- 初心者モード / 詳細モード切替
- フィルタ（キーワード・正規表現・重要度・チャンネルIDなど）
- 重複抑制、レート制限、集約、サイレント時間設定
- ルーティングルールでWebhook振り分け

### バッテリー管理
- 基本情報 / 詳細情報 / 充放電情報 / 劣化推定グラフを表示
- 劣化履歴収集（1時間ごと）
- バッテリー残量の定期送信（間隔 + 開始時刻）
- 公称容量（mAh）手入力対応

### 設定・保守
- バックアップ/復元（保存先選択）
- 履歴保持期間設定と手動クリーンアップ
- テーマ切替（ライト / ダーク / システム）
- 主要カードの配色を青テーマに合う水色トーンへ統一

## UI/UX 方針
- 5タブ構成は維持し、画面間で操作位置と情報階層を統一
- 共通UIコンポーネント（カード/バナー/アクション）で見た目を統一
- 狭幅端末（<600dp）と広幅端末（>=600dp）で崩れにくいレスポンシブ設計

## 画面構成
- 履歴: 通知履歴一覧、アプリ詳細、LINE会話履歴
- 転送アプリ: 転送対象/履歴対象、個別Webhook
- ルール: テンプレート、フィルタ、抑制、ルーティング
- バッテリー: 状態表示、履歴グラフ、定期送信、公称容量
- 設定: Webhook、バックアップ、通知制御、テーマ、履歴管理

## 開発環境
- Android Studio: Hedgehog 以降推奨
- Android SDK: API 34
- JDK: 17
- Gradle: プロジェクト同梱 wrapper

## ビルド
```bash
export JAVA_HOME="/path/to/jdk-17"
./gradlew :app:assembleDebug
```

生成物:
`/Users/contras11/codes/Notify2Discord/app/build/outputs/apk/debug/app-debug.apk`

## バージョン
- versionCode: `23`
- versionName: `1.3.1`

## リンク
- [GitHub リポジトリ](https://github.com/contras11/Notify2Discord)
- [個人開発ポータル](https://remudo.com/)
- [X (Twitter)](https://x.com/remudo_)
